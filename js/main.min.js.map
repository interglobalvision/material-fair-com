{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","$body","$","init","_this","this","window","resize","onResize","hasClass","Press","Program","Vip","Mailchimp","on","slideToggle","toggleClass","length","resizeActiveEvents","fixWidows","each","string","html","replace","$mailchimpForm","$submitButton","find","$emailInput","bindSubmit","event","preventDefault","prop","validateEmail","val","mailchimpAjax","printResponse","email","regex","is_email","test","$form","ajax","type","attr","url","data","serialize","cache","dataType","jsonp","contentType","error","err","success","result","code","$responseElem","currentLang","photoGallery","mySwiper","Swiper","speed","spaceBetween","nextButton","prevButton","loop","sizePhotoSlides","sliderHeight","height","maxImgHeight","outerHeight","css","calendarAccordion","$events","next","stop","animate","removeClass","addClass","currentHeight","autoHeight","bindShowRsvp","hide","show","jQuery","document","ready"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Site, currentLang, Swiper, Modernizr */\n\nSite = {\n  mobileThreshold: 601,\n  $body: $('body'),\n\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    if (Site.$body.hasClass('post-type-archive-press')) {\n      _this.Press.init();\n    }\n\n    if (Site.$body.hasClass('post-type-archive-event') || Site.$body.hasClass('page-vip')) {\n      _this.Program.init();\n    }\n\n    if (Site.$body.hasClass('page-vip')) {\n      _this.Vip.init();\n    }\n\n    _this.Mailchimp.init();\n\n    $('.js-menu-trigger').on('click', function() {\n      $('#main-menu').slideToggle(400);\n      $('.menu-toggle').toggleClass('open');\n    });\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    if ($('.calendar-heading.active').length) {\n      _this.Program.resizeActiveEvents();\n    }\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n};\n\nSite.Mailchimp = {\n  $mailchimpForm: $('#mailchimp-form'),\n\n  init: function() {\n    var _this = this;\n\n    _this.$submitButton = this.$mailchimpForm.find('input[type=\"submit\"]');\n    _this.$emailInput = this.$mailchimpForm.find('input[type=\"email\"]');\n\n\n    if (_this.$mailchimpForm.length) {\n      _this.bindSubmit();\n    }\n  },\n\n  bindSubmit: function() {\n    var _this = this;\n\n    _this.$submitButton.on('click', function (event) {\n      event.preventDefault();\n      _this.$submitButton.prop('disabled', true);\n\n      if (_this.validateEmail(_this.$emailInput.val())) {\n        _this.mailchimpAjax(_this.$mailchimpForm);\n      } else {\n        _this.printResponse('invalid-email');\n      }\n    });\n  },\n\n  validateEmail: function(email) {\n    var regex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n    var is_email = regex.test(email);\n\n    if (is_email) {\n      return true;\n    }\n    return false;\n  },\n\n  mailchimpAjax: function($form) {\n    var _this = this;\n\n    $.ajax({\n      type: $form.attr('method'),\n      url: $form.attr('action'),\n      data: $form.serialize(),\n      cache: false,\n      dataType: 'jsonp',\n      jsonp: 'c',\n      contentType: \"application/json; charset=utf-8\",\n      error: function(err) {\n        _this.printResponse('server-error');\n      },\n      success: function(data) {\n        if (data.result != 'success') {\n          _this.printResponse('invalid-email');\n        } else {\n          _this.printResponse('success');\n        }\n      },\n    });\n  },\n\n  printResponse: function(code) {\n    var _this = this,\n      $responseElem = $('#mailchimp-response');\n\n    switch (code) {\n      case 'invalid-email':\n        if (currentLang === 'es') {\n          $responseElem.html('Tu correo está raro...inténtalo de nuevo');\n        } else {\n          $responseElem.html('Your email is weird...try again');\n        }\n        break;\n      case 'server-error':\n        if (currentLang === 'es') {\n          $responseElem.html('Parece que el servidor no funciona :(');\n        } else {\n          $responseElem.html('Looks like the server is down :(');\n        }\n        break;\n      case 'success':\n        if (currentLang === 'es') {\n          $responseElem.html('¡Exito! Muchas gracias :)');\n        } else {\n          $responseElem.html('Success! Thanks a lot :)');\n        }\n        break;\n    }\n\n    _this.$submitButton.prop('disabled', false);\n    _this.$emailInput.val('');\n  }\n};\n\nSite.Press = {\n  init: function() {\n    var _this = this;\n\n    if ($('.swiper-slide').length) {\n      _this.photoGallery();\n    }\n  },\n\n  photoGallery: function() {\n    var _this = this;\n\n    _this.mySwiper = new Swiper('.swiper-container', {\n      speed: 400,\n      spaceBetween: 100,\n      nextButton: '.swiper-button-next',\n      prevButton: '.swiper-button-prev',\n      loop: true,\n    });\n\n    _this.sizePhotoSlides();\n  },\n\n  sizePhotoSlides: function() {\n    var sliderHeight = $('.swiper-container').height();\n\n    $('.swiper-slide').each(function() {\n      if ($(this).find('.slide-caption').length) {\n        var maxImgHeight = sliderHeight - $(this).find('.slide-caption').outerHeight(true);\n\n        $(this).find('img').css('max-height', maxImgHeight + 'px');\n      } else {\n        $(this).find('img').css('max-height', sliderHeight + 'px');\n      }\n    });\n  },\n};\n\nSite.Program = {\n  init: function() {\n    var _this = this;\n\n    if ($('.calendar-day').length) {\n      _this.calendarAccordion();\n    }\n  },\n\n  calendarAccordion: function() {\n    $('.calendar-heading').on('click', function() {\n      var $events = $(this).next('.calendar-events');\n\n      if (!$(this).hasClass('active')) {\n        var height = $events.css('height','auto').outerHeight();\n        $events.css('height',0);\n        $events.stop().animate({'height':height},200);\n        $(this).addClass('active');\n      } else {\n        $events.stop().animate({'height':0},200);\n        $(this).removeClass('active');\n      }\n    })\n  },\n\n  resizeActiveEvents: function() {\n    $('.calendar-heading.active').each(function() {\n      var $events = $(this).next('.calendar-events');\n      var currentHeight = $events.outerHeight();\n      var autoHeight = $events.css('height','auto').outerHeight();\n\n      $events.css('height',currentHeight);\n      $events.stop().animate({'height':autoHeight},100);\n    });\n  },\n};\n\nSite.Vip = {\n  init: function() {\n    var _this = this;\n\n    _this.bindShowRsvp();\n  },\n\n  bindShowRsvp: function() {\n    var _this = this;\n\n    $('#show-vip-rsvp').on('click', function() {\n      $('#vip-rsvp-text-container').hide(200);\n      $('#vip-rsvp-form-container').show(200);\n    })\n  },\n}\n\njQuery(document).ready(function () {\n  'use strict';\n\n  Site.init();\n\n});\n"],"sourceRoot":"/source/"}