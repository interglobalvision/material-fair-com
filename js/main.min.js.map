{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","$body","$","init","_this","this","window","resize","onResize","hasClass","Press","Program","Mailchimp","on","slideToggle","toggleClass","fixWidows","each","string","html","replace","$mailchimpForm","$submitButton","find","$emailInput","length","bindSubmit","event","preventDefault","prop","validateEmail","val","mailchimpAjax","printResponse","email","regex","is_email","test","$form","ajax","type","attr","url","data","serialize","cache","dataType","jsonp","contentType","error","err","success","result","code","$responseElem","currentLang","photoGallery","mySwiper","Swiper","speed","spaceBetween","nextButton","prevButton","loop","sizePhotoSlides","sliderHeight","height","maxImgHeight","outerHeight","css","calendarAccordion","$events","next","stop","animate","removeClass","addClass","jQuery","document","ready"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Site, currentLang, Swiper, Modernizr */\n\nSite = {\n  mobileThreshold: 601,\n  $body: $('body'),\n\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    if (Site.$body.hasClass('post-type-archive-press')) {\n      _this.Press.init();\n    }\n\n    if (Site.$body.hasClass('post-type-archive-event') || Site.$body.hasClass('page-vip')) {\n      _this.Program.init();\n    }\n\n    _this.Mailchimp.init();\n\n    $('.js-menu-trigger').on('click', function() {\n      $('#main-menu').slideToggle(400);\n      $('.menu-toggle').toggleClass('open');\n    });\n  },\n\n  onResize: function() {\n    var _this = this;\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n};\n\nSite.Mailchimp = {\n  $mailchimpForm: $('#mailchimp-form'),\n\n  init: function() {\n    var _this = this;\n\n    _this.$submitButton = this.$mailchimpForm.find('input[type=\"submit\"]');\n    _this.$emailInput = this.$mailchimpForm.find('input[type=\"email\"]');\n\n\n    if (_this.$mailchimpForm.length) {\n      _this.bindSubmit();\n    }\n  },\n\n  bindSubmit: function() {\n    var _this = this;\n\n    _this.$submitButton.on('click', function (event) {\n      event.preventDefault();\n      _this.$submitButton.prop('disabled', true);\n\n      if (_this.validateEmail(_this.$emailInput.val())) {\n        _this.mailchimpAjax(_this.$mailchimpForm);\n      } else {\n        _this.printResponse('invalid-email');\n      }\n    });\n  },\n\n  validateEmail: function(email) {\n    var regex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n    var is_email = regex.test(email);\n\n    if (is_email) {\n      return true;\n    }\n    return false;\n  },\n\n  mailchimpAjax: function($form) {\n    var _this = this;\n\n    $.ajax({\n      type: $form.attr('method'),\n      url: $form.attr('action'),\n      data: $form.serialize(),\n      cache: false,\n      dataType: 'jsonp',\n      jsonp: 'c',\n      contentType: \"application/json; charset=utf-8\",\n      error: function(err) {\n        _this.printResponse('server-error');\n      },\n      success: function(data) {\n        if (data.result != 'success') {\n          _this.printResponse('invalid-email');\n        } else {\n          _this.printResponse('success');\n        }\n      },\n    });\n  },\n\n  printResponse: function(code) {\n    var _this = this,\n      $responseElem = $('#mailchimp-response');\n\n    switch (code) {\n      case 'invalid-email':\n        if (currentLang === 'es') {\n          $responseElem.html('Tu correo está raro...inténtalo de nuevo');\n        } else {\n          $responseElem.html('Your email is weird...try again');\n        }\n        break;\n      case 'server-error':\n        if (currentLang === 'es') {\n          $responseElem.html('Parece que el servidor no funciona :(');\n        } else {\n          $responseElem.html('Looks like the server is down :(');\n        }\n        break;\n      case 'success':\n        if (currentLang === 'es') {\n          $responseElem.html('¡Exito! Muchas gracias :)');\n        } else {\n          $responseElem.html('Success! Thanks a lot :)');\n        }\n        break;\n    }\n\n    _this.$submitButton.prop('disabled', false);\n    _this.$emailInput.val('');\n  }\n};\n\nSite.Press = {\n  init: function() {\n    var _this = this;\n\n    if ($('.swiper-slide').length) {\n      _this.photoGallery();\n    }\n  },\n\n  photoGallery: function() {\n    var _this = this;\n\n    _this.mySwiper = new Swiper('.swiper-container', {\n      speed: 400,\n      spaceBetween: 100,\n      nextButton: '.swiper-button-next',\n      prevButton: '.swiper-button-prev',\n      loop: true,\n    });\n\n    _this.sizePhotoSlides();\n  },\n\n  sizePhotoSlides: function() {\n    var sliderHeight = $('.swiper-container').height();\n\n    $('.swiper-slide').each(function() {\n      if ($(this).find('.slide-caption').length) {\n        var maxImgHeight = sliderHeight - $(this).find('.slide-caption').outerHeight(true);\n\n        $(this).find('img').css('max-height', maxImgHeight + 'px');\n      } else {\n        $(this).find('img').css('max-height', sliderHeight + 'px');\n      }\n    });\n  },\n};\n\nSite.Program = {\n  init: function() {\n    var _this = this;\n\n    if ($('.calendar-day').length) {\n      _this.calendarAccordion();\n    }\n  },\n\n  calendarAccordion: function() {\n    $('.calendar-heading').on('click', function() {\n      var $events = $(this).next('.calendar-events');\n\n      if (!$(this).hasClass('active')) {\n        var height = $events.css('height','auto').outerHeight();\n        $events.css('height',0);\n        $events.stop().animate({'height':height},200);\n        $(this).addClass('active');\n      } else {\n        $events.stop().animate({'height':0},200);\n        $(this).removeClass('active');\n      }\n    })\n  },\n};\n\njQuery(document).ready(function () {\n  'use strict';\n\n  Site.init();\n\n});\n"],"sourceRoot":"/source/"}